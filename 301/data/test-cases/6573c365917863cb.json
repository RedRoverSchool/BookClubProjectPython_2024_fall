{"uid":"6573c365917863cb","name":"test_create_announcement_with_only_required_fields[chromium-user_registration_cleanup0]","fullName":"tests.test_announcement#test_create_announcement_with_only_required_fields","historyId":"71eafbdd97b66ca8514d65cd64b87aac","time":{"start":1735202418805,"stop":1735202418805,"duration":0},"status":"broken","statusMessage":"Exception: Request failed: 500 - <!DOCTYPE html>\n<html lang=\"ru\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <link href=\"https://fonts.googleapis.com/css2?family=Lato:wght@700&family=Open+Sans:wght@400&display=swap\" rel=\"stylesheet\">\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n    <link rel=\"stylesheet\" href=\"https://371102d9-1fa94835-e9a2-4fa9-bd23-8f9c1c387a39.s3.timeweb.cloud/css/style.css\">\n\n    <title>Объявления</title>\n</head>\n<body class=\"d-flex flex-column min-vh-100\">\n    <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            const banner = document.getElementById('cookie-consent-banner');\n            const acceptButton = document.getElementById('accept-cookies');\n            const manageButton = document.getElementById('manage-cookies');\n            const rejectButton = document.getElementById('reject-cookies');\n    \n            // Проверяем localStorage, чтобы решить показывать баннер или нет\n            if (!localStorage.getItem('cookies_accepted')) {\n                banner.style.display = 'block';\n            } else if (localStorage.getItem('cookies_accepted') === 'true') {\n                loadYandexMetrika();\n            }\n    \n            acceptButton.addEventListener('click', function() {\n                localStorage.setItem('cookies_accepted', 'true');\n                banner.style.display = 'none';\n                loadYandexMetrika();\n            });\n    \n            manageButton.addEventListener('click', function() {\n                window.location.href = '/cookie_settings'; // Adjust as necessary\n            });\n    \n            rejectButton.addEventListener('click', function() {\n                localStorage.setItem('cookies_accepted', 'false');\n                banner.style.display = 'none';\n            });\n        });\n    \n        function loadYandexMetrika() {\n            (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\n            m[i].l=1*new Date();\n            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}\n            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\n            (window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\n    \n            ym(99283150, \"init\", {\n                clickmap: true,\n                trackLinks: true,\n                accurateTrackBounce: true\n            });\n        }\n    </script>\n    \n    <noscript><div><img src=\"https://mc.yandex.ru/watch/99283150\" style=\"position:absolute; left:-9999px;\" alt=\"\" /></div></noscript>\n    \n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark py-4 shadow-sm\">\n        <div class=\"container\">\n            <a class=\"navbar-brand fw-bold fs-4\" href=\"/\">\n                <i class=\"fas fa-lightbulb me-2\"></i>Мыслеплав\n            </a>\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n                <ul class=\"navbar-nav ms-auto\">\n                    \n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/authorization/login/\">\n                                <i class=\"fas fa-sign-in-alt me-1\"></i>Войти\n                            </a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/authorization/signup/\">\n                                <i class=\"fas fa-user-plus me-1\"></i>Регистрация\n                            </a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/listings/list/\">\n                                <i class=\"fas fa-search me-1\"></i>Найти репетитора\n                            </a>\n                        </li>\n                    \n                </ul>\n            </div>\n        </div>\n    </nav>\n\n<style>\n    .navbar-brand {\n        font-size: 1.75rem;\n        color: #ffffff;\n        transition: color 0.3s, transform 0.3s;\n    }\n    \n    .navbar-brand:hover {\n        color: #ffd700;\n        transform: scale(1.05);\n    }\n    \n    .navbar-nav .nav-link {\n        font-size: 1.25rem;\n        color: #ffffff;\n        margin-right: 25px;\n        transition: color 0.3s, background 0.3s;\n        border-radius: 5px;\n    }\n    \n    .navbar-nav .nav-link:hover {\n        color: #ffd700;\n        background-color: rgba(255, 255, 255, 0.1);\n    }\n    \n</style>\n\n\n    <main class=\"flex-grow-1 py-4\">\n        <div class=\"container\">\n            <!-- Отображение сообщений -->\n            \n\n            \n            \n    <div style=\"text-align: center; margin-top: 20%;\">\n        <h1 style=\"font-size: 100px;\">500</h1>\n        <p>Произошла ошибка</p>\n        <a class=\"btn btn-outline-dark\" href=\"/\">На главную</a>\n    </div>\n\n            <div id=\"cookie-consent-banner\" class=\"position-fixed bg-light p-4 rounded shadow-lg\" style=\"bottom: 20px; right: 20px; width: 90%; max-width: 400px; z-index: 1050; display: none;\">\n                <p class=\"mb-2\">Мы используем куки для улучшения вашего опыта на нашем сайте. Вы можете управлять своими предпочтениями.</p>\n                <div class=\"d-flex flex-column justify-content-between\">\n                    <button id=\"accept-cookies\" class=\"btn btn-dark w-100 mb-2\">Согласиться</button>\n                    <button id=\"manage-cookies\" class=\"btn btn-secondary w-100 mb-2\">Подробнее</button>\n                    <button id=\"reject-cookies\" class=\"btn btn-danger w-100\">Отклонить все</button>\n                </div>\n            </div>\n            \n        </div>\n    </main>\n    \n    <footer class=\"text-white text-center py-3 mt-4\" style=\"background-color: #333;\">\n        <p class=\"mb-0\">&copy; 2024 Мыслеплав. Все права защищены.</p>\n        <a href=\"https://www.example.com/privacy-policy\" class=\"text-white\">Политика конфиденциальности</a>\n    </footer>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js\"></script>\n</body>\n</html>","statusTrace":"request = <SubRequest 'user_registration_cleanup' for <Function test_create_announcement_with_only_required_fields[chromium-user_registration_cleanup0]>>\napi_request = <api_clients.user_api.ApiClient object at 0x7fb3dbc053d0>\n\n    @pytest.fixture(scope=\"function\")\n    def user_registration_cleanup(request, api_request):\n        role, is_premium, is_writer = request.param\n        # Генерация данных пользователя с заданной ролью и статусами\n        user_data = UserFactory.generate_user(\n            role=role, is_premium=is_premium, is_writer=is_writer\n        )\n        # Регистрация пользователя перед тестом\n>       api_request.post(\"/api/users/\", user_data.model_dump())\n\nconftest.py:178: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \napi_clients/user_api.py:65: in post\n    return self._send_request(\"POST\", endpoint, data=data)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <api_clients.user_api.ApiClient object at 0x7fb3dbc053d0>\nmethod = 'POST', endpoint = '/api/users/', email = None\ndata = {'email': 'bradylaura@example.net', 'end_subscription': '2024-12-24', 'first_name': 'Raymond', 'is_premium': True, ...}\nparams = None\n\n    def _send_request(\n        self,\n        method: str,\n        endpoint: str,\n        email: str = None,\n        data: Dict = None,\n        params: Dict = None,\n    ):\n        # Формирование URL с учетом email, если он передан\n        url = f\"{self.base_url}{endpoint}\"\n        if email:\n            url = f\"{url}{email}/\"  # Добавление email в конец URL для всех запросов, кроме POST\n    \n        headers = {\"Content-Type\": \"application/json\"}\n        response = None\n    \n        # Выбор метода запроса и отправка\n        if method == \"POST\":\n            response = requests.post(\n                url,\n                json=data,\n                auth=HTTPBasicAuth(*self.auth_credentials),\n                headers=headers,\n            )\n        elif method == \"GET\":\n            response = requests.get(\n                url,\n                params=params,\n                auth=HTTPBasicAuth(*self.auth_credentials),\n                headers=headers,\n            )\n        elif method == \"PUT\":\n            response = requests.put(\n                url,\n                json=data,\n                auth=HTTPBasicAuth(*self.auth_credentials),\n                headers=headers,\n            )\n        elif method == \"DELETE\":\n            response = requests.delete(\n                url, auth=HTTPBasicAuth(*self.auth_credentials), headers=headers\n            )\n    \n        # Проверка успешности запроса\n        if response.status_code in [200, 201, 204]:\n            return response.json() if response.status_code != 204 else None\n        else:\n>           raise Exception(f\"Request failed: {response.status_code} - {response.text}\")\nE           Exception: Request failed: 500 - <!DOCTYPE html>\nE           <html lang=\"ru\">\nE           \nE           <head>\nE               <meta charset=\"UTF-8\">\nE               <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\nE           \nE               <link href=\"https://fonts.googleapis.com/css2?family=Lato:wght@700&family=Open+Sans:wght@400&display=swap\" rel=\"stylesheet\">\nE           \nE               <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\nE               <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css\">\nE               <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\nE               <link rel=\"stylesheet\" href=\"https://371102d9-1fa94835-e9a2-4fa9-bd23-8f9c1c387a39.s3.timeweb.cloud/css/style.css\">\nE           \nE               <title>Объявления</title>\nE           </head>\nE           <body class=\"d-flex flex-column min-vh-100\">\nE               <script>\nE                   document.addEventListener('DOMContentLoaded', function() {\nE                       const banner = document.getElementById('cookie-consent-banner');\nE                       const acceptButton = document.getElementById('accept-cookies');\nE                       const manageButton = document.getElementById('manage-cookies');\nE                       const rejectButton = document.getElementById('reject-cookies');\nE               \nE                       // Проверяем localStorage, чтобы решить показывать баннер или нет\nE                       if (!localStorage.getItem('cookies_accepted')) {\nE                           banner.style.display = 'block';\nE                       } else if (localStorage.getItem('cookies_accepted') === 'true') {\nE                           loadYandexMetrika();\nE                       }\nE               \nE                       acceptButton.addEventListener('click', function() {\nE                           localStorage.setItem('cookies_accepted', 'true');\nE                           banner.style.display = 'none';\nE                           loadYandexMetrika();\nE                       });\nE               \nE                       manageButton.addEventListener('click', function() {\nE                           window.location.href = '/cookie_settings'; // Adjust as necessary\nE                       });\nE               \nE                       rejectButton.addEventListener('click', function() {\nE                           localStorage.setItem('cookies_accepted', 'false');\nE                           banner.style.display = 'none';\nE                       });\nE                   });\nE               \nE                   function loadYandexMetrika() {\nE                       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\nE                       m[i].l=1*new Date();\nE                       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}\nE                       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\nE                       (window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\nE               \nE                       ym(99283150, \"init\", {\nE                           clickmap: true,\nE                           trackLinks: true,\nE                           accurateTrackBounce: true\nE                       });\nE                   }\nE               </script>\nE               \nE               <noscript><div><img src=\"https://mc.yandex.ru/watch/99283150\" style=\"position:absolute; left:-9999px;\" alt=\"\" /></div></noscript>\nE               \nE               <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\nE           \nE               <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark py-4 shadow-sm\">\nE                   <div class=\"container\">\nE                       <a class=\"navbar-brand fw-bold fs-4\" href=\"/\">\nE                           <i class=\"fas fa-lightbulb me-2\"></i>Мыслеплав\nE                       </a>\nE                       <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\nE                           <span class=\"navbar-toggler-icon\"></span>\nE                       </button>\nE                       <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\nE                           <ul class=\"navbar-nav ms-auto\">\nE                               \nE                                   <li class=\"nav-item\">\nE                                       <a class=\"nav-link\" href=\"/authorization/login/\">\nE                                           <i class=\"fas fa-sign-in-alt me-1\"></i>Войти\nE                                       </a>\nE                                   </li>\nE                                   <li class=\"nav-item\">\nE                                       <a class=\"nav-link\" href=\"/authorization/signup/\">\nE                                           <i class=\"fas fa-user-plus me-1\"></i>Регистрация\nE                                       </a>\nE                                   </li>\nE                                   <li class=\"nav-item\">\nE                                       <a class=\"nav-link\" href=\"/listings/list/\">\nE                                           <i class=\"fas fa-search me-1\"></i>Найти репетитора\nE                                       </a>\nE                                   </li>\nE                               \nE                           </ul>\nE                       </div>\nE                   </div>\nE               </nav>\nE           \nE           <style>\nE               .navbar-brand {\nE                   font-size: 1.75rem;\nE                   color: #ffffff;\nE                   transition: color 0.3s, transform 0.3s;\nE               }\nE               \nE               .navbar-brand:hover {\nE                   color: #ffd700;\nE                   transform: scale(1.05);\nE               }\nE               \nE               .navbar-nav .nav-link {\nE                   font-size: 1.25rem;\nE                   color: #ffffff;\nE                   margin-right: 25px;\nE                   transition: color 0.3s, background 0.3s;\nE                   border-radius: 5px;\nE               }\nE               \nE               .navbar-nav .nav-link:hover {\nE                   color: #ffd700;\nE                   background-color: rgba(255, 255, 255, 0.1);\nE               }\nE               \nE           </style>\nE           \nE           \nE               <main class=\"flex-grow-1 py-4\">\nE                   <div class=\"container\">\nE                       <!-- Отображение сообщений -->\nE                       \nE           \nE                       \nE                       \nE               <div style=\"text-align: center; margin-top: 20%;\">\nE                   <h1 style=\"font-size: 100px;\">500</h1>\nE                   <p>Произошла ошибка</p>\nE                   <a class=\"btn btn-outline-dark\" href=\"/\">На главную</a>\nE               </div>\nE           \nE                       <div id=\"cookie-consent-banner\" class=\"position-fixed bg-light p-4 rounded shadow-lg\" style=\"bottom: 20px; right: 20px; width: 90%; max-width: 400px; z-index: 1050; display: none;\">\nE                           <p class=\"mb-2\">Мы используем куки для улучшения вашего опыта на нашем сайте. Вы можете управлять своими предпочтениями.</p>\nE                           <div class=\"d-flex flex-column justify-content-between\">\nE                               <button id=\"accept-cookies\" class=\"btn btn-dark w-100 mb-2\">Согласиться</button>\nE                               <button id=\"manage-cookies\" class=\"btn btn-secondary w-100 mb-2\">Подробнее</button>\nE                               <button id=\"reject-cookies\" class=\"btn btn-danger w-100\">Отклонить все</button>\nE                           </div>\nE                       </div>\nE                       \nE                   </div>\nE               </main>\nE               \nE               <footer class=\"text-white text-center py-3 mt-4\" style=\"background-color: #333;\">\nE                   <p class=\"mb-0\">&copy; 2024 Мыслеплав. Все права защищены.</p>\nE                   <a href=\"https://www.example.com/privacy-policy\" class=\"text-white\">Политика конфиденциальности</a>\nE               </footer>\nE           \nE               <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js\"></script>\nE               <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js\"></script>\nE           </body>\nE           </html>\n\napi_clients/user_api.py:61: Exception","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1735202286256,"stop":1735202286256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1735202286256,"stop":1735202286257,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1735202286257,"stop":1735202286257,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1735202286257,"stop":1735202286258,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1735202286257,"stop":1735202286257,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1735202286258,"stop":1735202286491,"duration":233},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_root_dir","time":{"start":1735202286258,"stop":1735202286258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1735202286258,"stop":1735202286258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1735202286491,"stop":1735202286491,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1735202286491,"stop":1735202286557,"duration":66},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1735202286491,"stop":1735202286491,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1735202286557,"stop":1735202286558,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1735202286557,"stop":1735202286557,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1735202286558,"stop":1735202286558,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1735202418806,"stop":1735202418815,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1735202418806,"stop":1735202418806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1735202418806,"stop":1735202418806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1735202418806,"stop":1735202418806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1735202418816,"stop":1735202418843,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"header","time":{"start":1735202418843,"stop":1735202418843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"login","time":{"start":1735202418843,"stop":1735202418843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"video_and_screenshot","time":{"start":1735202418843,"stop":1735202418843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"announcement","time":{"start":1735202418843,"stop":1735202418843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_registration_cleanup","time":{"start":1735202418844,"stop":1735202419647,"duration":803},"status":"broken","statusMessage":"Exception: Request failed: 500 - <!DOCTYPE html>\n<html lang=\"ru\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <link href=\"https://fonts.googleapis.com/css2?family=Lato:wght@700&family=Open+Sans:wght@400&display=swap\" rel=\"stylesheet\">\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n    <link rel=\"stylesheet\" href=\"https://371102d9-1fa94835-e9a2-4fa9-bd23-8f9c1c387a39.s3.timeweb.cloud/css/style.css\">\n\n    <title>Объявления</title>\n</head>\n<body class=\"d-flex flex-column min-vh-100\">\n    <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            const banner = document.getElementById('cookie-consent-banner');\n            const acceptButton = document.getElementById('accept-cookies');\n            const manageButton = document.getElementById('manage-cookies');\n            const rejectButton = document.getElementById('reject-cookies');\n    \n            // Проверяем localStorage, чтобы решить показывать баннер или нет\n            if (!localStorage.getItem('cookies_accepted')) {\n                banner.style.display = 'block';\n            } else if (localStorage.getItem('cookies_accepted') === 'true') {\n                loadYandexMetrika();\n            }\n    \n            acceptButton.addEventListener('click', function() {\n                localStorage.setItem('cookies_accepted', 'true');\n                banner.style.display = 'none';\n                loadYandexMetrika();\n            });\n    \n            manageButton.addEventListener('click', function() {\n                window.location.href = '/cookie_settings'; // Adjust as necessary\n            });\n    \n            rejectButton.addEventListener('click', function() {\n                localStorage.setItem('cookies_accepted', 'false');\n                banner.style.display = 'none';\n            });\n        });\n    \n        function loadYandexMetrika() {\n            (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\n            m[i].l=1*new Date();\n            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}\n            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\n            (window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\n    \n            ym(99283150, \"init\", {\n                clickmap: true,\n                trackLinks: true,\n                accurateTrackBounce: true\n            });\n        }\n    </script>\n    \n    <noscript><div><img src=\"https://mc.yandex.ru/watch/99283150\" style=\"position:absolute; left:-9999px;\" alt=\"\" /></div></noscript>\n    \n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark py-4 shadow-sm\">\n        <div class=\"container\">\n            <a class=\"navbar-brand fw-bold fs-4\" href=\"/\">\n                <i class=\"fas fa-lightbulb me-2\"></i>Мыслеплав\n            </a>\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n                <ul class=\"navbar-nav ms-auto\">\n                    \n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/authorization/login/\">\n                                <i class=\"fas fa-sign-in-alt me-1\"></i>Войти\n                            </a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/authorization/signup/\">\n                                <i class=\"fas fa-user-plus me-1\"></i>Регистрация\n                            </a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/listings/list/\">\n                                <i class=\"fas fa-search me-1\"></i>Найти репетитора\n                            </a>\n                        </li>\n                    \n                </ul>\n            </div>\n        </div>\n    </nav>\n\n<style>\n    .navbar-brand {\n        font-size: 1.75rem;\n        color: #ffffff;\n        transition: color 0.3s, transform 0.3s;\n    }\n    \n    .navbar-brand:hover {\n        color: #ffd700;\n        transform: scale(1.05);\n    }\n    \n    .navbar-nav .nav-link {\n        font-size: 1.25rem;\n        color: #ffffff;\n        margin-right: 25px;\n        transition: color 0.3s, background 0.3s;\n        border-radius: 5px;\n    }\n    \n    .navbar-nav .nav-link:hover {\n        color: #ffd700;\n        background-color: rgba(255, 255, 255, 0.1);\n    }\n    \n</style>\n\n\n    <main class=\"flex-grow-1 py-4\">\n        <div class=\"container\">\n            <!-- Отображение сообщений -->\n            \n\n            \n            \n    <div style=\"text-align: center; margin-top: 20%;\">\n        <h1 style=\"font-size: 100px;\">500</h1>\n        <p>Произошла ошибка</p>\n        <a class=\"btn btn-outline-dark\" href=\"/\">На главную</a>\n    </div>\n\n            <div id=\"cookie-consent-banner\" class=\"position-fixed bg-light p-4 rounded shadow-lg\" style=\"bottom: 20px; right: 20px; width: 90%; max-width: 400px; z-index: 1050; display: none;\">\n                <p class=\"mb-2\">Мы используем куки для улучшения вашего опыта на нашем сайте. Вы можете управлять своими предпочтениями.</p>\n                <div class=\"d-flex flex-column justify-content-between\">\n                    <button id=\"accept-cookies\" class=\"btn btn-dark w-100 mb-2\">Согласиться</button>\n                    <button id=\"manage-cookies\" class=\"btn btn-secondary w-100 mb-2\">Подробнее</button>\n                    <button id=\"reject-cookies\" class=\"btn btn-danger w-100\">Отклонить все</button>\n                </div>\n            </div>\n            \n        </div>\n    </main>\n    \n    <footer class=\"text-white text-center py-3 mt-4\" style=\"background-color: #333;\">\n        <p class=\"mb-0\">&copy; 2024 Мыслеплав. Все права защищены.</p>\n        <a href=\"https://www.example.com/privacy-policy\" class=\"text-white\">Политика конфиденциальности</a>\n    </footer>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js\"></script>\n</body>\n</html>\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/_pytest/fixtures.py\", line 891, in call_fixture_func\n    fixture_result = next(generator)\n                     ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/BookClubQA_Python_2024_fall/BookClubQA_Python_2024_fall/conftest.py\", line 178, in user_registration_cleanup\n    api_request.post(\"/api/users/\", user_data.model_dump())\n  File \"/home/runner/work/BookClubQA_Python_2024_fall/BookClubQA_Python_2024_fall/api_clients/user_api.py\", line 65, in post\n    return self._send_request(\"POST\", endpoint, data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/BookClubQA_Python_2024_fall/BookClubQA_Python_2024_fall/api_clients/user_api.py\", line 61, in _send_request\n    raise Exception(f\"Request failed: {response.status_code} - {response.text}\")\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_request","time":{"start":1735202418844,"stop":1735202418844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"video_and_screenshot::0","time":{"start":1735202419657,"stop":1735202419806,"duration":149},"status":"passed","steps":[],"attachments":[{"uid":"dc55e5bfaba2e835","name":"screenshot","source":"dc55e5bfaba2e835.png","type":"image/png","size":4331},{"uid":"1e285a55f97f739d","name":"video","source":"1e285a55f97f739d.webm","type":"video/webm","size":1858}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1735202419806,"stop":1735202419806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1735202419807,"stop":1735202419812,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1735204474736,"stop":1735204474745,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1735204474746,"stop":1735204474774,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1735204474776,"stop":1735204474783,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_announcement"},{"name":"host","value":"fv-az1922-858"},{"name":"thread","value":"2447-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_announcement"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"user_registration_cleanup","value":"('teacher', True, False)"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":7,"unknown":0,"total":9},"items":[{"uid":"9fa5ddc301c3e9e1","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/300//#testresult/9fa5ddc301c3e9e1","status":"broken","statusDetails":"Exception: Request failed: 500 - <!DOCTYPE html>\n<html lang=\"ru\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <link href=\"https://fonts.googleapis.com/css2?family=Lato:wght@700&family=Open+Sans:wght@400&display=swap\" rel=\"stylesheet\">\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n    <link rel=\"stylesheet\" href=\"https://371102d9-1fa94835-e9a2-4fa9-bd23-8f9c1c387a39.s3.timeweb.cloud/css/style.css\">\n\n    <title>Объявления</title>\n</head>\n<body class=\"d-flex flex-column min-vh-100\">\n    <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            const banner = document.getElementById('cookie-consent-banner');\n            const acceptButton = document.getElementById('accept-cookies');\n            const manageButton = document.getElementById('manage-cookies');\n            const rejectButton = document.getElementById('reject-cookies');\n    \n            // Проверяем localStorage, чтобы решить показывать баннер или нет\n            if (!localStorage.getItem('cookies_accepted')) {\n                banner.style.display = 'block';\n            } else if (localStorage.getItem('cookies_accepted') === 'true') {\n                loadYandexMetrika();\n            }\n    \n            acceptButton.addEventListener('click', function() {\n                localStorage.setItem('cookies_accepted', 'true');\n                banner.style.display = 'none';\n                loadYandexMetrika();\n            });\n    \n            manageButton.addEventListener('click', function() {\n                window.location.href = '/cookie_settings'; // Adjust as necessary\n            });\n    \n            rejectButton.addEventListener('click', function() {\n                localStorage.setItem('cookies_accepted', 'false');\n                banner.style.display = 'none';\n            });\n        });\n    \n        function loadYandexMetrika() {\n            (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\n            m[i].l=1*new Date();\n            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}\n            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\n            (window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\n    \n            ym(99283150, \"init\", {\n                clickmap: true,\n                trackLinks: true,\n                accurateTrackBounce: true\n            });\n        }\n    </script>\n    \n    <noscript><div><img src=\"https://mc.yandex.ru/watch/99283150\" style=\"position:absolute; left:-9999px;\" alt=\"\" /></div></noscript>\n    \n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark py-4 shadow-sm\">\n        <div class=\"container\">\n            <a class=\"navbar-brand fw-bold fs-4\" href=\"/\">\n                <i class=\"fas fa-lightbulb me-2\"></i>Мыслеплав\n            </a>\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n                <ul class=\"navbar-nav ms-auto\">\n                    \n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/authorization/login/\">\n                                <i class=\"fas fa-sign-in-alt me-1\"></i>Войти\n                            </a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/authorization/signup/\">\n                                <i class=\"fas fa-user-plus me-1\"></i>Регистрация\n                            </a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"/listings/list/\">\n                                <i class=\"fas fa-search me-1\"></i>Найти репетитора\n                            </a>\n                        </li>\n                    \n                </ul>\n            </div>\n        </div>\n    </nav>\n\n<style>\n    .navbar-brand {\n        font-size: 1.75rem;\n        color: #ffffff;\n        transition: color 0.3s, transform 0.3s;\n    }\n    \n    .navbar-brand:hover {\n        color: #ffd700;\n        transform: scale(1.05);\n    }\n    \n    .navbar-nav .nav-link {\n        font-size: 1.25rem;\n        color: #ffffff;\n        margin-right: 25px;\n        transition: color 0.3s, background 0.3s;\n        border-radius: 5px;\n    }\n    \n    .navbar-nav .nav-link:hover {\n        color: #ffd700;\n        background-color: rgba(255, 255, 255, 0.1);\n    }\n    \n</style>\n\n\n    <main class=\"flex-grow-1 py-4\">\n        <div class=\"container\">\n            <!-- Отображение сообщений -->\n            \n\n            \n            \n    <div style=\"text-align: center; margin-top: 20%;\">\n        <h1 style=\"font-size: 100px;\">500</h1>\n        <p>Произошла ошибка</p>\n        <a class=\"btn btn-outline-dark\" href=\"/\">На главную</a>\n    </div>\n\n            <div id=\"cookie-consent-banner\" class=\"position-fixed bg-light p-4 rounded shadow-lg\" style=\"bottom: 20px; right: 20px; width: 90%; max-width: 400px; z-index: 1050; display: none;\">\n                <p class=\"mb-2\">Мы используем куки для улучшения вашего опыта на нашем сайте. Вы можете управлять своими предпочтениями.</p>\n                <div class=\"d-flex flex-column justify-content-between\">\n                    <button id=\"accept-cookies\" class=\"btn btn-dark w-100 mb-2\">Согласиться</button>\n                    <button id=\"manage-cookies\" class=\"btn btn-secondary w-100 mb-2\">Подробнее</button>\n                    <button id=\"reject-cookies\" class=\"btn btn-danger w-100\">Отклонить все</button>\n                </div>\n            </div>\n            \n        </div>\n    </main>\n    \n    <footer class=\"text-white text-center py-3 mt-4\" style=\"background-color: #333;\">\n        <p class=\"mb-0\">&copy; 2024 Мыслеплав. Все права защищены.</p>\n        <a href=\"https://www.example.com/privacy-policy\" class=\"text-white\">Политика конфиденциальности</a>\n    </footer>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js\"></script>\n</body>\n</html>","time":{"start":1735202038905,"stop":1735202038905,"duration":0}},{"uid":"5fc3a5c171d69fda","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/299//#testresult/5fc3a5c171d69fda","status":"passed","time":{"start":1735121013237,"stop":1735121020171,"duration":6934}},{"uid":"719dcd1973eea2a7","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/298//#testresult/719dcd1973eea2a7","status":"passed","time":{"start":1735106224711,"stop":1735106231572,"duration":6861}},{"uid":"35424543cd08f191","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/298//#testresult/35424543cd08f191","status":"passed","time":{"start":1735103960237,"stop":1735103967359,"duration":7122}},{"uid":"9db6ca1de84225a1","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/297//#testresult/9db6ca1de84225a1","status":"passed","time":{"start":1735103186419,"stop":1735103190597,"duration":4178}},{"uid":"95aaf96c93ebce5f","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/296//#testresult/95aaf96c93ebce5f","status":"passed","time":{"start":1735102434848,"stop":1735102438992,"duration":4144}},{"uid":"80e8b23d87ab4301","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/295//#testresult/80e8b23d87ab4301","status":"passed","time":{"start":1735101516599,"stop":1735101520839,"duration":4240}},{"uid":"466be341accb8999","reportUrl":"https://RedRoverSchool.github.io/BookClubQA_Python_2024_fall/295//#testresult/466be341accb8999","status":"passed","time":{"start":1735097868922,"stop":1735097875715,"duration":6793}}]},"tags":[]},"source":"6573c365917863cb.json","parameterValues":["'chromium'","('teacher', True, False)"]}